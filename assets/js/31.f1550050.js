(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{316:function(t,e,a){"use strict";a.r(e);var r=a(9),s=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"vue-3-0的数据监听"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-3-0的数据监听","aria-hidden":"true"}},[t._v("#")]),t._v(" Vue 3.0的数据监听")]),t._v(" "),a("p",[t._v("10月05日凌晨Vue3的源代码正式发布了，由于某些原因，好几天后才看到源码。\n看完reactivity模块的最大感受就是，比2.x的源码简单多了，很多地方都进行了解耦，看起来轻松多了。")]),t._v(" "),a("blockquote",[a("p",[t._v("官方仓库 "),a("a",{attrs:{href:"https://github.com/vuejs/vue-next",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-next"),a("OutboundLink")],1)])]),t._v(" "),a("blockquote",[a("p",[t._v("个人解析"),a("a",{attrs:{href:"https://github.com/sillyY/vue3",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue3.0"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"先导知识"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#先导知识","aria-hidden":"true"}},[t._v("#")]),t._v(" 先导知识")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://vue-composition-api-rfc.netlify.com/#api-introduction",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue Composition API RFC"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"http://es6.ruanyifeng.com/#docs/proxy",target:"_blank",rel:"noopener noreferrer"}},[t._v("Proxy及其API"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"http://es6.ruanyifeng.com/#docs/reflect",target:"_blank",rel:"noopener noreferrer"}},[t._v("Reflect及其API"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"vue-reactivity模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-reactivity模块","aria-hidden":"true"}},[t._v("#")]),t._v(" @vue/reactivity模块")]),t._v(" "),a("p",[t._v("该模块是Vue3的数据响应式系统，包含reactive(响应式数据)、computed(计算数据)、effect(副作用)、ref(数据容器)等几个部分。")]),t._v(" "),a("blockquote",[a("p",[t._v("目录位于 "),a("code",[t._v("packages/reactivity")])])]),t._v(" "),a("h3",{attrs:{id:"how-to-use"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#how-to-use","aria-hidden":"true"}},[t._v("#")]),t._v(" How to Use")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" num"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" cValue "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("computed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("num "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("effect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("num"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nvalue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("num "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),a("h3",{attrs:{id:"reactivity"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reactivity","aria-hidden":"true"}},[t._v("#")]),t._v(" reactivity")]),t._v(" "),a("p",[t._v("拆分成5个部分")]),t._v(" "),a("ul",[a("li",[t._v("reactive"),a("br"),t._v("\n响应式数据，用于生成Proxy对象")]),t._v(" "),a("li",[t._v("effect"),a("br"),t._v("\n用于创建effect对象")]),t._v(" "),a("li",[t._v("handler"),a("br"),t._v("\nProxy对象handler"),a("br"),t._v("\n包含baseHandler和collectionHandler,baseHandler包含大多数场景.")]),t._v(" "),a("li",[t._v("computed"),a("br"),t._v("\n计算属性")]),t._v(" "),a("li",[t._v("ref"),a("br"),t._v("\nref对象\n"),a("img",{attrs:{src:"/reactivity.png",alt:"reactivity"}})])]),t._v(" "),a("h3",{attrs:{id:"reactive"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reactive","aria-hidden":"true"}},[t._v("#")]),t._v(" reactive")]),t._v(" "),a("p",[t._v("reactive主要用于生成Proxy对象")]),t._v(" "),a("blockquote",[a("p",[t._v("建议随代码阅读，该图片建议打开新标签页阅读")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/reactive.png",alt:"reactive"}})]),t._v(" "),a("h3",{attrs:{id:"effect"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#effect","aria-hidden":"true"}},[t._v("#")]),t._v(" effect")]),t._v(" "),a("p",[t._v("effect生成的对象作为一个容器，保存着将要发生的变化.\n本身亦属于内部实现代码，非开发者使用代码")]),t._v(" "),a("blockquote",[a("p",[t._v("建议随代码阅读")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/effect.png",alt:"effect"}})]),t._v(" "),a("h3",{attrs:{id:"handler"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#handler","aria-hidden":"true"}},[t._v("#")]),t._v(" handler")]),t._v(" "),a("p",[t._v("本身是Proxy对象的handler, 用于存放目标target本身的get、set、deleteProperty、has、owekeys方法。")]),t._v(" "),a("blockquote",[a("p",[t._v("建议随代码阅读, 该图片建议打开新标签页阅读")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/baseHandler.png",alt:"baseHandler"}})]),t._v(" "),a("h3",{attrs:{id:"computed"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#computed","aria-hidden":"true"}},[t._v("#")]),t._v(" computed")]),t._v(" "),a("p",[t._v("计算属性，其实也就是调用reactive、effect、和handler的方法实现。")]),t._v(" "),a("blockquote",[a("p",[t._v("建议随代码阅读")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/computed.png",alt:"computed"}})]),t._v(" "),a("h3",{attrs:{id:"ref"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ref","aria-hidden":"true"}},[t._v("#")]),t._v(" ref")]),t._v(" "),a("p",[t._v("ref对象，它指的不是vue2.0中的那个"),a("a",{attrs:{href:"https://cn.vuejs.org/v2/api/#ref",target:"_blank",rel:"noopener noreferrer"}},[t._v("ref"),a("OutboundLink")],1),t._v(",它是vue3里的新产物，表示响应式对象")]),t._v(" "),a("blockquote",[a("p",[t._v("建议随代码阅读")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/ref.png",alt:"ref"}})]),t._v(" "),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("p",[t._v("Vue3的响应式数据系统，相比较Vue2来说，通过Proxy解决了Vue2中的对象监听问题，算是有了很大的提升。其次，在源码上来说，解耦保证了其简洁、清晰、高效的特点。\n但是大幅改变了Vue的写法，虽然存在兼容模式，但还是增加了开发者的学习负担。")]),t._v(" "),a("Valine")],1)}),[],!1,null,null,null);e.default=s.exports}}]);