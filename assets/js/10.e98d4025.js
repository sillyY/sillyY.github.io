(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{304:function(e,v,_){"use strict";_.r(v);var a=_(9),t=Object(a.a)({},(function(){var e=this,v=e.$createElement,_=e._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("h1",{attrs:{id:"nginx"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#nginx","aria-hidden":"true"}},[e._v("#")]),e._v(" nginx")]),e._v(" "),_("p",[e._v("Nginx（发音同engine x）是异步框架的网页伺服器，也可以用作反向代理、负载平衡器和HTTP缓存")]),e._v(" "),_("h2",{attrs:{id:"入门"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#入门","aria-hidden":"true"}},[e._v("#")]),e._v(" 入门")]),e._v(" "),_("p",[e._v("最早接触"),_("code",[e._v("nginx")]),e._v("的时候，当时还是个萌新，什么都不懂。当时使用"),_("code",[e._v("nginx")]),e._v("是为了部署一个"),_("code",[e._v("vue")]),e._v("项目，让其可以在局域网访问(ps: 同一个WIFI下的手机和电脑都可以访问)。也许有人就要问，vue不是支持局域网访问了吗？对，没错，现在是支持的。当时是vue比较早的版本，也许是vue不支持，亦或是我不会配置。"),_("br"),e._v("\n当时使用"),_("code",[e._v("nginx")]),e._v("的时候，其实我只是使用者，并没有去学习。某位大神帮我配置的，让我去使用而已。"),_("br"),e._v("\n真正开始接触"),_("code",[e._v("nginx")]),e._v("的时候，是在上家公司的时候。Boss要我通过"),_("code",[e._v("nginx")]),e._v("配置移动端和PC端自动跳转。这个功能对于当时的我,算是比较难的。然后从头开始看nginx文档，查资料，问大神，终于让我完成了这个功能。也随着这次经验，让我之后对"),_("code",[e._v("nginx")]),e._v("有了深厚的兴趣。")]),e._v(" "),_("h2",{attrs:{id:"功能"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#功能","aria-hidden":"true"}},[e._v("#")]),e._v(" 功能")]),e._v(" "),_("h3",{attrs:{id:"反向代理"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#反向代理","aria-hidden":"true"}},[e._v("#")]),e._v(" 反向代理")]),e._v(" "),_("ul",[_("li",[_("p",[e._v("正向代理与反向代理")]),e._v(" "),_("ul",[_("li",[_("p",[e._v("正向代理"),_("br"),e._v("\n比如"),_("code",[e._v("VPN")]),e._v("， 国内并不能友好的自由上网。而VPN的作用就是通过一台可以访问外网的代理服务器，将外网网站的资源转换给你使用。简单来说，就是当你想要访问google时，命令你的代理服务器去访问google,然后代理服务器拿到资源后，将资源再转给你的电脑，这样你就可以访问google的页面了。")])]),e._v(" "),_("li",[_("p",[e._v("反向代理\n其实就是跟"),_("code",[e._v("正向代理")]),e._v("相反。"),_("code",[e._v("正向代理")]),e._v("是代替客户端去访问服务器，而"),_("code",[e._v("反向代理")]),e._v("就是代替服务器去访问用户。")])])])]),e._v(" "),_("li",[_("p",[e._v("为什么要使用反向代理？")]),e._v(" "),_("ul",[_("li",[e._v("保护原始服务器，所有的访问都需要通过代理服务器。")]),e._v(" "),_("li",[e._v("缓存静态资源，加快网页请求")]),e._v(" "),_("li",[e._v("负载均衡"),_("br"),e._v(" "),_("code",[e._v("代理服务器")]),e._v("虽然只有一台，但"),_("code",[e._v("原始服务器")]),e._v("可以有多个了。比如"),_("code",[e._v("原始服务器")]),e._v("有A,B,C, 当你访问时，"),_("code",[e._v("代理服务器")]),e._v("检测到"),_("code",[e._v("原始服务器A")]),e._v("访问量过大，它就会去请求"),_("code",[e._v("原始服务器B")]),e._v("来获取资源，从而降低"),_("code",[e._v("原始服务器A")]),e._v("的压力。")])])])]),e._v(" "),_("h3",{attrs:{id:"网络限制"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#网络限制","aria-hidden":"true"}},[e._v("#")]),e._v(" 网络限制")]),e._v(" "),_("p",[e._v("比如公司内网，不想让你访问某些网站，就可以通过nginx进行限制")]),e._v(" "),_("h3",{attrs:{id:"跨域"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#跨域","aria-hidden":"true"}},[e._v("#")]),e._v(" 跨域")]),e._v(" "),_("p",[e._v("虽说跨域现在已经是很常见的问题，解决起来也很方便。但"),_("code",[e._v("nginx")]),e._v("却提供了一种新思路.")]),e._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v("    location ^~/api/ {\n        rewrite ^/api/(.*)$ /$1 break;\n        proxy_pass https://www.source.com/;\n    }  \n")])])]),_("p",[e._v("调用接口时，你首先访问"),_("code",[e._v("代理服务器")]),e._v(", "),_("code",[e._v("代理服务器改写你的请求")]),e._v("，让你的请求和"),_("code",[e._v("原始服务器")]),e._v("同源, 从而解决跨域问题。")]),e._v(" "),_("h3",{attrs:{id:"适配pc端与移动端"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#适配pc端与移动端","aria-hidden":"true"}},[e._v("#")]),e._v(" 适配PC端与移动端")]),e._v(" "),_("p",[e._v("这也是我痛苦很久才实现的功能，通过检查"),_("code",[e._v("user-agent")]),e._v("，判断去访问不同的"),_("code",[e._v("原始服务器")]),e._v(".")]),e._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v("    location / {\n        if ($http_user_agent ~* '(Android|webOS|iPhone|iPod|BlackBerry)') {\n            set $request 'mobile';\n        }\n        if ($request = 'mobile') {\n            rewrite ^.+ http://www.phone.com;\n        }\n    }  \n")])])]),_("blockquote",[_("p",[e._v("除此之外，nginx还有很多功能。但操作起来相对比较繁琐，在这篇入门里讲，就不太合适了，留着后续讲解吧。")])])])}),[],!1,null,null,null);v.default=t.exports}}]);