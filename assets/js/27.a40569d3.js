(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{314:function(t,s,a){"use strict";a.r(s);var e=a(9),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"vscode插件开发之侧边栏"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vscode插件开发之侧边栏","aria-hidden":"true"}},[t._v("#")]),t._v(" VSCode插件开发之侧边栏")]),t._v(" "),a("p",[t._v("VSCode Extension API 提供了很多功能，比如实现侧边栏树形结构、编辑区高亮、主题字体等等。由于最近开发的插件主要实现了侧边栏树形结构，所以就在此探讨下vscode 的侧边栏树形结构。")]),t._v(" "),a("h2",{attrs:{id:"api详解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api详解","aria-hidden":"true"}},[t._v("#")]),t._v(" API详解")]),t._v(" "),a("h3",{attrs:{id:"treedataprovider"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#treedataprovider","aria-hidden":"true"}},[t._v("#")]),t._v(" TreeDataProvider")]),t._v(" "),a("h4",{attrs:{id:"树形结构的数据提供者"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#树形结构的数据提供者","aria-hidden":"true"}},[t._v("#")]),t._v(" 树形结构的数据提供者")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("事件")]),t._v(" "),a("p",[t._v("onDidChangeTreeData")]),t._v(" "),a("p",[t._v("树形结构数据改变触发函数")])]),t._v(" "),a("li",[a("p",[t._v("方法")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("getChildren")]),t._v(" "),a("p",[t._v("获取元素的子元素")])]),t._v(" "),a("li",[a("p",[t._v("getParent")]),t._v(" "),a("p",[t._v("获取元素的父元素")])]),t._v(" "),a("li",[a("p",[t._v("getTreeItem")]),t._v(" "),a("p",[t._v("获取元素的表示形式")])])])])]),t._v(" "),a("h4",{attrs:{id:"如何注册？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何注册？","aria-hidden":"true"}},[t._v("#")]),t._v(" 如何注册？")]),t._v(" "),a("p",[t._v("Window.registerTreeDataProvider")]),t._v(" "),a("p",[t._v("为"),a("code",[t._v("视图view")]),t._v("注册"),a("code",[t._v("数据提供者dataProvider")])]),t._v(" "),a("h3",{attrs:{id:"treeview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#treeview","aria-hidden":"true"}},[t._v("#")]),t._v(" TreeView")]),t._v(" "),a("h4",{attrs:{id:"树形结构的视图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#树形结构的视图","aria-hidden":"true"}},[t._v("#")]),t._v(" 树形结构的视图")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("事件")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("onDidChangeSelection")]),t._v(" "),a("p",[t._v("选择更改时触发的事件")])]),t._v(" "),a("li",[a("p",[t._v("onDidChangeVisibility")]),t._v(" "),a("p",[t._v("可见性更改触发的事件")])]),t._v(" "),a("li",[a("p",[t._v("onDidCollapseElement")]),t._v(" "),a("p",[t._v("元素折叠时触发的事件")])]),t._v(" "),a("li",[a("p",[t._v("onDidExpandElement")]),t._v(" "),a("p",[t._v("元素展开时触发的事件")])])])])]),t._v(" "),a("p",[t._v("其他部分略，可参考官网API"),a("a",{attrs:{href:"https://code.visualstudio.com/api/references/vscode-api#TreeView",target:"_blank",rel:"noopener noreferrer"}},[t._v("TreeView"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("调整时尽量操作数据提供者TreeDataProvider, 而非直接操作视图层")])]),t._v(" "),a("h4",{attrs:{id:"如何创建？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何创建？","aria-hidden":"true"}},[t._v("#")]),t._v(" 如何创建？")]),t._v(" "),a("p",[t._v("Window.createTreeView")]),t._v(" "),a("p",[t._v("创建树形结构视图view")]),t._v(" "),a("h4",{attrs:{id:"treedataprovider与treeview的联系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#treedataprovider与treeview的联系","aria-hidden":"true"}},[t._v("#")]),t._v(" TreeDataProvider与TreeView的联系")]),t._v(" "),a("p",[t._v("类似于MVC的关系，")]),t._v(" "),a("p",[t._v("TreeDataProvider属于M，应用程序中用于处理应用程序数据逻辑的部分")]),t._v(" "),a("p",[t._v("TreeView属于V，应用程序中处理数据显示的部分")]),t._v(" "),a("p",[t._v("VSCode内置部分属于C, 应用程序中处理用户交互的部分。")]),t._v(" "),a("h3",{attrs:{id:"disposable"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#disposable","aria-hidden":"true"}},[t._v("#")]),t._v(" Disposable")]),t._v(" "),a("p",[t._v("表示一种可以释放类型的资源, 如监听事件或计数器等")]),t._v(" "),a("blockquote",[a("p",[t._v("属于vscode开发中比较重要的一个API，可用于优化性能")])]),t._v(" "),a("ol",[a("li",[a("p",[t._v("静态方法")]),t._v(" "),a("p",[t._v("from")]),t._v(" "),a("p",[t._v("将类disposable的方法转成Disposable对象")])]),t._v(" "),a("li",[a("p",[t._v("方法")]),t._v(" "),a("p",[t._v("dispose")]),t._v(" "),a("p",[t._v("销毁dispose对象")])])]),t._v(" "),a("blockquote",[a("p",[t._v("disposable一般通过Disposable.from来生成disposable对象，而非构造函数.")])]),t._v(" "),a("h2",{attrs:{id:"侧栏视图及配置详解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#侧栏视图及配置详解","aria-hidden":"true"}},[t._v("#")]),t._v(" 侧栏视图及配置详解")]),t._v(" "),a("h3",{attrs:{id:"视图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#视图","aria-hidden":"true"}},[t._v("#")]),t._v(" 视图")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://code.visualstudio.com/assets/api/extension-guides/tree-view/view-actions.png",alt:"view-actions"}})]),t._v(" "),a("ul",[a("li",[a("p",[t._v("location")]),t._v(" "),a("p",[t._v("表示在视图中的位置")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("view/title")]),t._v(" "),a("p",[t._v("视图标题位置")]),t._v(" "),a("p",[t._v("group 包含navigation和menus方式")])]),t._v(" "),a("li",[a("p",[t._v("view/item/content")]),t._v(" "),a("p",[t._v("树形结构位置")]),t._v(" "),a("p",[t._v("group 包含line和menus方式")])])])]),t._v(" "),a("li",[a("p",[t._v("group")]),t._v(" "),a("p",[t._v("表示在视图中的菜单分组")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("navigation")]),t._v(" "),a("p",[t._v("默认组，始终位于最前面")])]),t._v(" "),a("li",[a("p",[t._v("line")]),t._v(" "),a("p",[t._v("树形结构内联位置")])]),t._v(" "),a("li",[a("p",[t._v("menus")]),t._v(" "),a("p",[t._v("菜单方式")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://code.visualstudio.com/assets/api/references/contribution-points/groupSorting.png",alt:"Menu Group Sorting"}})]),t._v(" "),a("ul",[a("li",[t._v("Navigation  这个组始终放到最前面")]),t._v(" "),a("li",[t._v("1_modification 更改组")]),t._v(" "),a("li",[t._v("9_cutcopypaste 编辑组")]),t._v(" "),a("li",[t._v("z_commands 默认组")])]),t._v(" "),a("p",[t._v("分组除"),a("code",[t._v("navigation")]),t._v("外，其他的按照"),a("code",[t._v("0-9")]),t._v("，"),a("code",[t._v("a-z")]),t._v("的顺序排列，故可以创建一个自定义组别，如"),a("code",[t._v("3_test")])]),t._v(" "),a("blockquote",[a("p",[t._v("不同的菜单默认分组会有所不同，详细参考"),a("a",{attrs:{href:"https://code.visualstudio.com/api/references/contribution-points#Sorting-of-groups",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sorting-of-groups"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("组内排序，可通过"),a("code",[t._v("@<number>")]),t._v("的方式来自定义顺序，如")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"editor/title"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 放到第2个")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"when"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"editorHasSelection"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"command"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"extension.Command"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"group"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"myGroup@2"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 放到第一个")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"when"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"editorHasSelection"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"command"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"extension.Command"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"group"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"myGroup@1"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])])])]),t._v(" "),a("h3",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置","aria-hidden":"true"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),a("h4",{attrs:{id:"视图分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#视图分类","aria-hidden":"true"}},[t._v("#")]),t._v(" 视图分类")]),t._v(" "),a("ul",[a("li",[t._v('explorer "资源管理器"视图')]),t._v(" "),a("li",[t._v('debug "运行和调试"视图')]),t._v(" "),a("li",[t._v('scm  "源代码管理"视图')]),t._v(" "),a("li",[t._v('test "测试资源管理器"视图')]),t._v(" "),a("li",[t._v("自定义视图")])]),t._v(" "),a("h4",{attrs:{id:"自定义视图创建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义视图创建","aria-hidden":"true"}},[t._v("#")]),t._v(" 自定义视图创建")]),t._v(" "),a("p",[t._v("视图容器"),a("code",[t._v("viewContainer")]),t._v("添加自定义视图, 然后在"),a("code",[t._v("视图views")]),t._v("中添加窗口")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"viewsContainers"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"activitybar"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test-view"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"title"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"测试窗口"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"icon"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"resources/icon.svg"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"views"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"test-view"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test-explorer"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"测试视图"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test-explorer2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"测试视图2"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("结果如下图所示:")]),t._v(" "),a("p",[a("img",{attrs:{src:"/tree-view-init.png",alt:"tree-view-init"}})]),t._v(" "),a("blockquote",[a("p",[t._v("需设置package.json中activationEvents为"),a("code",[t._v("[onView:<viewId>]")]),t._v("或"),a("code",[t._v("*")])])]),t._v(" "),a("h4",{attrs:{id:"视图操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#视图操作","aria-hidden":"true"}},[t._v("#")]),t._v(" 视图操作")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("title")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"contributes"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"menus"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"view/title"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"command"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"testview.refresh"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"when"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"view == testview"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"group"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"navigation"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"command"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"testview.add"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"when"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"view == testview"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("item/content")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"contributes"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"menus"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"view/item/context"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"command"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"testview.edit"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"when"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"view == testview && viewItem == test"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"group"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"inline"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"command"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"testview.delete"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"when"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"view == testview && viewItem == test"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("p",[t._v("command 即在"),a("code",[t._v("commands")]),t._v("中注册的命令")]),t._v(" "),a("p",[t._v("group 即位置分组")]),t._v(" "),a("p",[t._v("when 即决定在一定条件下显示，viewItem的对比值可以通过在getTreeItem中设定返回值的contextValue. 判断方式详见 "),a("code",[t._v("VSCodeAPI")]),t._v(" "),a("a",{attrs:{href:"https://code.visualstudio.com/docs/getstarted/keybindings#_when-clause-contexts",target:"_blank",rel:"noopener noreferrer"}},[t._v("when-clause-contexts"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"demo演示"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#demo演示","aria-hidden":"true"}},[t._v("#")]),t._v(" Demo演示")]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" vscode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vscode"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("activate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vscode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ExtensionContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tree "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vscode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createTreeView")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test-explorer"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    treeDataProvider"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestTreeDataProvider")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subscriptions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tree"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestTreeDataProvider")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("vscode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TreeDataProvider")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getChildren")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTreeItem")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      label"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("测试00")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("element"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("p",[t._v("结果如下：")]),t._v(" "),a("p",[a("img",{attrs:{src:"/tree-view-demo.png",alt:"tree-view-demo"}})]),t._v(" "),a("p",[t._v("利用"),a("code",[t._v("createTreeView")]),t._v("创建视图并指定数据提供者(treeDataProvider)为"),a("code",[t._v("new TestTreeDataProvider()")]),t._v(",  TestTreeDataProvider 实现了接口类，内含"),a("code",[t._v("getChildren")]),t._v("和"),a("code",[t._v("getTreeItem")]),t._v("，表示视图树形结构。")]),t._v(" "),a("h2",{attrs:{id:"参考文献"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文献","aria-hidden":"true"}},[t._v("#")]),t._v(" 参考文献")]),t._v(" "),a("ul",[a("li",[t._v("[1] "),a("a",{attrs:{href:"https://code.visualstudio.com/api/extension-guides/tree-view",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tree View API"),a("OutboundLink")],1),t._v("[OL] Visual Studio Code")]),t._v(" "),a("li",[t._v("[2] "),a("a",{attrs:{href:"http://blog.haoji.me/vscode-plugin-overview.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("VSCode插件全攻略"),a("OutboundLink")],1),t._v("[OL]小茗同学")])])])}),[],!1,null,null,null);s.default=n.exports}}]);