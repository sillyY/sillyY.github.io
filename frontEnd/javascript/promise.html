<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>æ‰‹å†™ Promise | sillyY</title>
    <meta name="description" content="Just playing around">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.28ef1fef.css" as="style"><link rel="preload" href="/assets/js/app.8dae8355.js" as="script"><link rel="preload" href="/assets/js/2.dc92909d.js" as="script"><link rel="preload" href="/assets/js/20.86ab84d4.js" as="script"><link rel="preload" href="/assets/js/6.a180e42e.js" as="script"><link rel="prefetch" href="/assets/js/10.e98d4025.js"><link rel="prefetch" href="/assets/js/11.5587c763.js"><link rel="prefetch" href="/assets/js/12.2d3c60f5.js"><link rel="prefetch" href="/assets/js/13.eaa7ea73.js"><link rel="prefetch" href="/assets/js/14.f6fe8d5b.js"><link rel="prefetch" href="/assets/js/15.17160c19.js"><link rel="prefetch" href="/assets/js/16.612f97fd.js"><link rel="prefetch" href="/assets/js/17.4ace0302.js"><link rel="prefetch" href="/assets/js/18.6e13a193.js"><link rel="prefetch" href="/assets/js/19.c2c41b36.js"><link rel="prefetch" href="/assets/js/21.51b2926e.js"><link rel="prefetch" href="/assets/js/22.68ae5fa7.js"><link rel="prefetch" href="/assets/js/23.46ee807b.js"><link rel="prefetch" href="/assets/js/24.ba851b1c.js"><link rel="prefetch" href="/assets/js/25.04343082.js"><link rel="prefetch" href="/assets/js/26.c3095e35.js"><link rel="prefetch" href="/assets/js/27.a40569d3.js"><link rel="prefetch" href="/assets/js/28.8f598cb4.js"><link rel="prefetch" href="/assets/js/29.715a5b6b.js"><link rel="prefetch" href="/assets/js/3.4df34556.js"><link rel="prefetch" href="/assets/js/30.fe812dba.js"><link rel="prefetch" href="/assets/js/31.f1550050.js"><link rel="prefetch" href="/assets/js/32.8c90a456.js"><link rel="prefetch" href="/assets/js/33.9515fed6.js"><link rel="prefetch" href="/assets/js/34.103c5784.js"><link rel="prefetch" href="/assets/js/35.ed96bf70.js"><link rel="prefetch" href="/assets/js/36.03c7586b.js"><link rel="prefetch" href="/assets/js/37.1f6cd2c2.js"><link rel="prefetch" href="/assets/js/38.dbf816f4.js"><link rel="prefetch" href="/assets/js/39.4387a0c9.js"><link rel="prefetch" href="/assets/js/4.8ca31cab.js"><link rel="prefetch" href="/assets/js/40.2830a92f.js"><link rel="prefetch" href="/assets/js/41.66cdba68.js"><link rel="prefetch" href="/assets/js/42.d3e87825.js"><link rel="prefetch" href="/assets/js/5.ed1cff9d.js"><link rel="prefetch" href="/assets/js/7.101c3ea0.js"><link rel="prefetch" href="/assets/js/8.38b06e0d.js"><link rel="prefetch" href="/assets/js/9.5d56b8fe.js">
    <link rel="stylesheet" href="/assets/css/0.styles.28ef1fef.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">sillyY</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">ğŸŒŸåšå®¢</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontEnd/" class="nav-link router-link-active">å‰ç«¯</a></li><li class="dropdown-item"><!----> <a href="/backEnd/" class="nav-link">åç«¯</a></li><li class="dropdown-item"><!----> <a href="/tools/" class="nav-link">å·¥å…·</a></li></ul></div></div><div class="nav-item"><a href="/learn/" class="nav-link">ğŸ“šå­¦ä¹ </a></div><div class="nav-item"><a href="/todo/" class="nav-link">ğŸ’¡Todo</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">ğŸ’»é¡¹ç›®</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://sillyy.cn/TemplateCLI-Extension/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Template
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://sillyy.cn/ele-vue/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ele-vue
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://sillyy.cn/diff-dir-file/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  diff-dir-file
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://sillyy.cn/vuepress-plugin-code-segment/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vuepress-plugin-code-segment
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/sillyY" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">ğŸŒŸåšå®¢</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontEnd/" class="nav-link router-link-active">å‰ç«¯</a></li><li class="dropdown-item"><!----> <a href="/backEnd/" class="nav-link">åç«¯</a></li><li class="dropdown-item"><!----> <a href="/tools/" class="nav-link">å·¥å…·</a></li></ul></div></div><div class="nav-item"><a href="/learn/" class="nav-link">ğŸ“šå­¦ä¹ </a></div><div class="nav-item"><a href="/todo/" class="nav-link">ğŸ’¡Todo</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">ğŸ’»é¡¹ç›®</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://sillyy.cn/TemplateCLI-Extension/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Template
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://sillyy.cn/ele-vue/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ele-vue
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://sillyy.cn/diff-dir-file/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  diff-dir-file
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://sillyy.cn/vuepress-plugin-code-segment/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vuepress-plugin-code-segment
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/sillyY" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/frontEnd/" class="sidebar-link">æ¬¢è¿</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontEnd/javascript/map-parseInt.html" class="sidebar-link">map-parseIntçš„è®¤è¯†ä¸äº†è§£</a></li><li><a href="/frontEnd/javascript/call-apply-bind.html" class="sidebar-link">æ‰‹å†™call-apply-bind</a></li><li><a href="/frontEnd/javascript/unpopular-statements.html" class="sidebar-link">JSå†·é—¨è¯­å¥</a></li><li><a href="/frontEnd/javascript/jump-loop.html" class="sidebar-link">è·³å‡ºå¾ªç¯çš„ä¸‰ç§æ–¹æ³•(break-return-continue)</a></li><li><a href="/frontEnd/javascript/promise.html" class="active sidebar-link">æ‰‹å†™Promise</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontEnd/javascript/promise.html#promises-a-è§„èŒƒ" class="sidebar-link">Promises/A+ è§„èŒƒ</a></li><li class="sidebar-sub-header"><a href="/frontEnd/javascript/promise.html#å¼€å‘å‡†å¤‡" class="sidebar-link">å¼€å‘å‡†å¤‡</a></li><li class="sidebar-sub-header"><a href="/frontEnd/javascript/promise.html#å¼€å‘" class="sidebar-link">å¼€å‘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontEnd/javascript/promise.html#å£°æ˜çŠ¶æ€å¸¸é‡å¹¶åˆ›å»ºä¸€ä¸ªç®€æ˜“çš„-promise-ç±»" class="sidebar-link">å£°æ˜çŠ¶æ€å¸¸é‡å¹¶åˆ›å»ºä¸€ä¸ªç®€æ˜“çš„ Promise ç±»</a></li><li class="sidebar-sub-header"><a href="/frontEnd/javascript/promise.html#å¼€å‘-then-æ–¹æ³•ï¼Œthen-æ–¹æ³•å‚æ•°ä¸º-onfulfilled-å’Œ-onrejected-2-ä¸ªå‡½æ•°" class="sidebar-link">å¼€å‘ then æ–¹æ³•ï¼Œthen æ–¹æ³•å‚æ•°ä¸º onFulfilled å’Œ onRejected 2 ä¸ªå‡½æ•°</a></li><li class="sidebar-sub-header"><a href="/frontEnd/javascript/promise.html#è¡¥å……-promise-å…¶ä»–æ–¹æ³•" class="sidebar-link">è¡¥å…… Promise å…¶ä»–æ–¹æ³•</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontEnd/javascript/promise.html#æµ‹è¯•" class="sidebar-link">æµ‹è¯•</a></li><li class="sidebar-sub-header"><a href="/frontEnd/javascript/promise.html#å‚è€ƒæ–‡çŒ®" class="sidebar-link">å‚è€ƒæ–‡çŒ®</a></li></ul></li><li><a href="/frontEnd/javascript/promise-analyze.html" class="sidebar-link">æ‰‹å†™Promiseè§£æ</a></li><li><a href="/frontEnd/javascript/svelte-counter.html" class="sidebar-link">svelteå°é²œä¹‹è®¡æ•°å™¨</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å°ç¨‹åº</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ‚ç±»</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ç½‘ç»œåè®®</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å‡½æ•°å¼ç¼–ç¨‹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ç®—æ³•</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>è®¾è®¡æ¨¡å¼</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æºç é˜…è¯»</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="æ‰‹å†™-promise"><a href="#æ‰‹å†™-promise" aria-hidden="true" class="header-anchor">#</a> æ‰‹å†™ Promise</h1> <p>Promise æºè‡ª ES6ï¼Œå¼‚æ­¥å¤„ç†å‡½æ•°ï¼Œæ˜¯ç›®å‰æ¯”è¾ƒæµè¡Œçš„ JavaScript å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆä¹‹ä¸€</p> <div class="tip custom-block"><p><a href="http://es6.ruanyifeng.com/#docs/promise" target="_blank" rel="noopener noreferrer">Promise<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <h2 id="promises-a-è§„èŒƒ"><a href="#promises-a-è§„èŒƒ" aria-hidden="true" class="header-anchor">#</a> Promises/A+ è§„èŒƒ</h2> <blockquote><p>ä¸ºå®ç°è€…æä¾›ä¸€ä¸ªå¥å…¨çš„ã€å¯äº’æ“ä½œçš„ JavaScript Promise çš„å¼€æ”¾æ ‡å‡†ã€‚</p></blockquote> <ul><li><a href="https://promisesaplus.com/" target="_blank" rel="noopener noreferrer">åŸæ–‡<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://juejin.im/post/5c4b0423e51d4525211c0fbc" target="_blank" rel="noopener noreferrer">è¯‘æ–‡<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="å¼€å‘å‡†å¤‡"><a href="#å¼€å‘å‡†å¤‡" aria-hidden="true" class="header-anchor">#</a> å¼€å‘å‡†å¤‡</h2> <ul><li><p>çŠ¶æ€<br>
Promise å­˜åœ¨ 3 ç§çŠ¶æ€ï¼Œ ç­‰å¾…çŠ¶æ€(PENDING)ï¼Œæ‰§è¡ŒçŠ¶æ€(FULFILLED), æ‹’ç»çŠ¶æ€(REJECTED)</p></li> <li><p>Promise ç±»ç§æœ‰å±æ€§</p> <ul><li>_state ç”¨äºå­˜å‚¨çŠ¶æ€</li> <li>_value ç”¨äºå‚¨å­˜æ‰§è¡ŒçŠ¶æ€(FULFILLED)ä¸­ä¸å¯å˜çš„å€¼</li> <li>_reason ç”¨äºå‚¨å­˜æ‹’ç»çŠ¶æ€(REJECTED)ä¸­ä¸å¯å˜çš„å€¼</li> <li>_onResolvedQueues ç”¨äºå­˜å‚¨æˆåŠŸå›è°ƒçš„å‡½æ•°</li> <li>_onRejectedQueues ç”¨äºå­˜å‚¨å¤±è´¥å›è°ƒçš„å‡½æ•°</li></ul></li> <li><p>ç¤ºä¾‹è§£æ</p></li></ul> <div class="language- extra-class"><pre class="language-text"><code>new Promise((resolve, reject) =&gt; {
    setTimeout(() =&gt; {
        resolve(1)
    })
}).then(res =&gt; {
    console.log(res)
}, err =&gt; {
    console.log(err)
})
</code></pre></div><ol><li><code>Promise</code> æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œéœ€è¦ <code>new</code> å»ç”Ÿæˆä¸€ä¸ªæ–°å®ä¾‹ï¼Œå‡½æ•°å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°</li> <li>æ‹¥æœ‰ <code>then</code> æ–¹æ³•ï¼Œ<code>then</code> æ–¹æ³•å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°</li></ol> <h2 id="å¼€å‘"><a href="#å¼€å‘" aria-hidden="true" class="header-anchor">#</a> å¼€å‘</h2> <h3 id="å£°æ˜çŠ¶æ€å¸¸é‡å¹¶åˆ›å»ºä¸€ä¸ªç®€æ˜“çš„-promise-ç±»"><a href="#å£°æ˜çŠ¶æ€å¸¸é‡å¹¶åˆ›å»ºä¸€ä¸ªç®€æ˜“çš„-promise-ç±»" aria-hidden="true" class="header-anchor">#</a> å£°æ˜çŠ¶æ€å¸¸é‡å¹¶åˆ›å»ºä¸€ä¸ªç®€æ˜“çš„ Promise ç±»</h3> <div class="language- extra-class"><pre class="language-text"><code>const PENDING = &quot;PENDING&quot;;
const FULFILLED = &quot;FULFILLED&quot;;
const REJECTED = &quot;REJECTED&quot;;

class Promise {
  constructor(executor) {
    this._state = PENDING;
    this._value = undefined;
    thhis._reason = undefined;
    this._onResolvedQueues = [];
    this._onRejectedQueues = [];

    const resolve = value =&gt; {
        if (this._state === PENDING) {
          this._state = FULFILLED;
          this._value = value;
          this._onResolvedQueues.forEach(fn =&gt; fn());
        }
      },
      reject = reason =&gt; {
        if (this._reason === PENDING) {
          this._state = REJECTED;
          this._reason = reason;
          this._onRejectedQueues.forEach(fn =&gt; fn());
        }
      };
    try {
      executor(resolve, reject);
    } catch (err) {
      reject(err);
    }
  }
}
</code></pre></div><p>è°ƒç”¨ ä¸‹é¢ä»£ç </p> <div class="language- extra-class"><pre class="language-text"><code>new Promsie((resolve, reject) =&gt; {
    // çœç•¥...
    resolve()
}),
</code></pre></div><p>å³ç›¸å½“äºæ‰§è¡Œ<code>resolve()</code> éƒ¨åˆ†</p> <h3 id="å¼€å‘-then-æ–¹æ³•ï¼Œthen-æ–¹æ³•å‚æ•°ä¸º-onfulfilled-å’Œ-onrejected-2-ä¸ªå‡½æ•°"><a href="#å¼€å‘-then-æ–¹æ³•ï¼Œthen-æ–¹æ³•å‚æ•°ä¸º-onfulfilled-å’Œ-onrejected-2-ä¸ªå‡½æ•°" aria-hidden="true" class="header-anchor">#</a> å¼€å‘ then æ–¹æ³•ï¼Œthen æ–¹æ³•å‚æ•°ä¸º onFulfilled å’Œ onRejected 2 ä¸ªå‡½æ•°</h3> <ul><li>èµ·æ­¥é˜¶æ®µ</li></ul> <div class="language- extra-class"><pre class="language-text"><code> // å£°æ˜ isFunction
function isFunction(fn) {
    return typeof fn === 'function'
}

// Promise ç±»ä¸­publicæ–¹æ³•
then(onFulfilled, onRejected) {
    // å…ˆåˆ¤æ–­onFulfilled å’Œ onReject æ˜¯å¦ä¸ºå‡½æ•°ï¼Œéå‡½æ•°è½¬æˆç›¸åº”å‡½æ•°
    onFulfilled = isFunction(onFulfilled) ? onFulfilled : value =&gt; value
    onRejected = isFunction(onRejected)
        ? onRejected
        : err =&gt; {
            throw err
        }

    // åˆ›å»ºä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ï¼Œå¹¶è¿”å›å®ƒ
    let promise = new Promise((resolve, reject) =&gt; {
        // TODO:çœç•¥å…³é”®ä»£ç 
    })

    return promise
}
</code></pre></div><div class="tip custom-block"><p>â€œåˆ›å»ºæ–°çš„ Promise å®ä¾‹ï¼Œå¹¶è¿”å›â€ - ç”¨äºå½¢æˆé“¾å¼è°ƒç”¨ï¼Œå³ <code>new Promsie().then().then(). ... (çœç•¥å‡½æ•°å‚æ•°)</code></p></div> <ul><li>å¤„ç†æ–°çš„ Promise å®ä¾‹ ä¼ å‚å‡½æ•°
æ ¹æ® Promise å®ä¾‹çš„ state çŠ¶æ€ï¼Œæ‰§è¡Œç›¸åº”å‡½æ•°</li></ul> <div class="language- extra-class"><pre class="language-text"><code>if (this._state === FULFILLED) {
  setTimeout(() =&gt; {
    try {
      let result = onFulfilled(this._value);
      // TODO:çœç•¥resolvePromise
    } catch (err) {
      reject(err);
    }
  });
}
if (this._state === REJECTED) {
  setTimeout(() =&gt; {
    try {
      let result = onRejected(this._reason);
      // TODO:çœç•¥resolvePromise
    } catch (err) {
      reject(err);
    }
  });
}
if (this._state === PENDING) {
  this._onResolvedQueues.push(() =&gt; {
    setTimeout(() =&gt; {
      try {
        let result = onFulfilled(this._value);
        // TODO:çœç•¥resolvePromise
      } catch (err) {
        reject(err);
      }
    });
  });
  this._onRejectedQueues.push(() =&gt; {
    setTimeout(() =&gt; {
      try {
        let result = onRejected(this._reason);
        // TODO:çœç•¥resolvePromise
      } catch (err) {
        reject(err);
      }
    });
  });
}

</code></pre></div><div class="tip custom-block"><ol><li>setTimeout æ˜¯ä¸ºäº†ä¿è¯æ‰§è¡Œå‡½æ•°æ˜¯å¼‚æ­¥æ‰§è¡Œ</li> <li>FULFILLED(æ‰§è¡ŒçŠ¶æ€)å’Œ REJECTED(æ‹’ç»çŠ¶æ€ï¼‰åˆ™ç›´æ¥è¿è¡Œå‡½æ•°</li> <li>PENDING(ç­‰å¾…çŠ¶æ€) åˆ†åˆ«æ”¶é›† FULFILLED(æ‰§è¡ŒçŠ¶æ€)å’Œ REJECTED(æ‹’ç»çŠ¶æ€ï¼‰çš„æ‰§è¡Œæ ˆ</li></ol></div> <div class="danger custom-block"><p>resolvePromise å‡½æ•°ç”¨äºå¤„ç†æ–°çš„å®ä¾‹(promise)ä¸â€œçˆ¶å®ä¾‹â€å¤„ç†ç»“æœ(result)ä¹‹é—´çš„å…³ç³»</p></div> <ul><li>å¤„ç† resolvePromise å‡½æ•°ï¼Œå‚æ•°åŒ…å«æ–°çš„å®ä¾‹(promise), çˆ¶å®ä¾‹å¤„ç†ç»“æœ(result), resolve å‡½æ•°ï¼Œreject å‡½æ•°</li></ul> <div class="language- extra-class"><pre class="language-text"><code>// è°ƒç”¨resolvePromise
resolvePromsie(promise, result, resolve, reject)
</code></pre></div><p>resolvePromise ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>// å£°æ˜isObject
function isObject(obj) {
    return typeof obj === 'object'
}
// Promise ç±»ç§æœ‰æ–¹æ³•
_resolvePromsie(promise, result, resolve, reject) {
    if (promise === result) {
      return reject(new TypeError('Chaining cycle detected for promise'))
    }

    let isExecuted = false
    if (result !== null &amp;&amp; (isFunction(result) || isObject(result))) {
      try {
        let then = result.then
        if (isFunction(then)) {
          then.call(
            result,
            value =&gt; {
              if (isExecuted) return
              isExecuted = true
              this._resolvePromsie(promise, value, resolve, reject)
            },
            err =&gt; {
              if (isExecuted) return
              isExecuted = true
              reject(err)
            }
          )
        } else {
          resolve(result)
        }
      } catch (err) {
        if (isExecuted) return
        isExecuted = true
        reject(err)
      }
    } else {
      resolve(result)
    }
  }
</code></pre></div><div class="tip custom-block"><ol><li>åˆ¤æ–­ result å’Œ promise æ˜¯å¦ç›¸ç­‰ï¼Œé˜²æ­¢å¾ªç¯å¼•ç”¨</li> <li>isExecuted ç”¨äºä¿è¯ å½“å‰ promise æœªè¢«è°ƒç”¨</li></ol></div> <h3 id="è¡¥å……-promise-å…¶ä»–æ–¹æ³•"><a href="#è¡¥å……-promise-å…¶ä»–æ–¹æ³•" aria-hidden="true" class="header-anchor">#</a> è¡¥å…… Promise å…¶ä»–æ–¹æ³•</h3> <p>å…¶ä»–æ–¹æ³•å·²ä¸éœ€è¦é¢å¤–ç‰¹åˆ«å¼€å‘ï¼Œé€šè¿‡è°ƒç”¨ç°æœ‰æ–¹æ³•å³å¯å®Œæˆï¼Œæ•…åœ¨æ­¤ä»…è´´å‡ºä»£ç ã€‚</p> <ul><li>catch</li></ul> <div class="language- extra-class"><pre class="language-text"><code>catch(fn) {
    return this.then(null, fn)
}
</code></pre></div><ul><li>Promise.resolve ä¸ Promise.reject</li></ul> <div class="language- extra-class"><pre class="language-text"><code>static resolve(value) {
    return new Promise((resolve, reject) =&gt; {
        resolve(value)
    })
}
static reject(err) {
    return new Promise((resolve, reject) =&gt; {
        reject(err)
    })
}
</code></pre></div><ul><li>Promise.all</li></ul> <div class="language- extra-class"><pre class="language-text"><code>static all(promises) {
  let arr = []
  let i = 0
  function processData(index, data) {
    arr[index] = data
    i++
    if (i == promises.length) {
      resolve(arr)
    }
  }
  return new Promise((resolve, reject) =&gt; {
    for (let i = 0; i &lt; promises.length; i++) {
      promises[i].then(data =&gt; {
        processData(i, data)
      }, reject)
    }
  })
}
</code></pre></div><ul><li>Promise.race</li></ul> <div class="language- extra-class"><pre class="language-text"><code>static race(promises) {
  return new Promise((resolve, reject) =&gt; {
    for (let i = 0; i &lt; promises.length; i++) {
      promises[i].then(resolve, reject)
    }
  })
}
</code></pre></div><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" aria-hidden="true" class="header-anchor">#</a> æµ‹è¯•</h2> <p>å¯ä»¥é€šè¿‡ promises-aplus-tests æ¥æµ‹è¯• promise æ˜¯å¦æ»¡è¶³ Promises/A+ è§„èŒƒ</p> <blockquote><p><a href="https://github.com/promises-aplus/promises-tests#readme" target="_blank" rel="noopener noreferrer">promises-aplus-tests<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <div class="danger custom-block"><p>å…¨å±€å®‰è£… promises-aplus-tests åï¼Œåœ¨æ–‡ä»¶æ·»åŠ å¦‚ä¸‹ä»£ç , ç„¶åæ‰§è¡Œ promises-aplus-tests + æ–‡ä»¶å</p></div> <div class="language- extra-class"><pre class="language-text"><code>//promiseçš„è¯­æ³•ç³–
Promise.defer=Promise.deferred=function(){
    let dfd={};
    dfd.promise=new Promise((resolve,reject)=&gt;{
        dfd.resolve=resolve;
        dfd.reject=reject;
    })
    return dfd;
}
</code></pre></div><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" aria-hidden="true" class="header-anchor">#</a> å‚è€ƒæ–‡çŒ®</h2> <ul><li><a href="https://promisesaplus.com/" target="_blank" rel="noopener noreferrer">Promises/A+<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/Yangfan2016" target="_blank" rel="noopener noreferrer">Yangfan2016<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> -<a href="https://juejin.im/post/5c4b0423e51d4525211c0fbc" target="_blank" rel="noopener noreferrer">ã€è¯‘ã€‘ Promises/A+ è§„èŒƒ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://juejin.im/user/5b2c66b36fb9a00e406a943f" target="_blank" rel="noopener noreferrer">afan<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - <a href="https://juejin.im/post/5b5ad5755188251ad06b735c#heading-5" target="_blank" rel="noopener noreferrer">æ ¹æ® Promises/A+è§„èŒƒ æ‰‹å†™ Promsie<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <blockquote><p>ä»£ç ä»“åº“
<a href="https://github.com/sillyY/promise" target="_blank" rel="noopener noreferrer">promise<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <div id="vcomments"></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°: </span> <span class="time">2019-11-12 22:18:56</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/frontEnd/javascript/jump-loop.html" class="prev">
          è·³å‡ºå¾ªç¯çš„ä¸‰ç§æ–¹æ³•(break-return-continue)
        </a></span> <span class="next"><a href="/frontEnd/javascript/promise-analyze.html">
          æ‰‹å†™Promiseè§£æ
        </a>
        â†’
      </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.8dae8355.js" defer></script><script src="/assets/js/2.dc92909d.js" defer></script><script src="/assets/js/20.86ab84d4.js" defer></script><script src="/assets/js/6.a180e42e.js" defer></script>
  </body>
</html>
